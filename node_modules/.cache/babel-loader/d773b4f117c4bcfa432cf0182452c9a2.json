{"ast":null,"code":"import _objectSpread from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import{Link,withRouter}from'react-router-dom';import{Button,Container,Form,FormGroup,Input,Label}from'reactstrap';import AppNavbar from'./AppNavbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=/*#__PURE__*/function(_Component){_inherits(Edit,_Component);var _super=_createSuper(Edit);function Edit(props){var _this;_classCallCheck(this,Edit);_this=_super.call(this,props);_this.nullFoodItem={description:'',calories:''};_this.state={foodItem:_this.nullFoodItem};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Edit,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var newFoodItem;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(this.props.match.params.id!=='new')){_context.next=7;break;}_context.next=3;return fetch(\"/food/\".concat(this.props.match.params.id));case 3:_context.next=5;return _context.sent.json();case 5:newFoodItem=_context.sent;this.setState({foodItem:newFoodItem});case 7:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleChange\",value:function handleChange(event){var target=event.target;var value=target.value;var name=target.name;var foodItem=_objectSpread({},this.state.foodItem);foodItem[name]=value;console.log(\"save new \"+name);console.log(foodItem);this.setState({foodItem:foodItem});}},{key:\"handleSubmit\",value:function(){var _handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var _this$state,foodItem,item;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();_this$state=this.state,foodItem=_this$state.foodItem,item=_this$state.item;console.log(this.state);console.log(foodItem);console.log(item);_context2.next=7;return fetch('/food'+(foodItem.id?'/'+foodItem.id:''),{method:foodItem.id?'PUT':'POST',headers:{'Accept':'application/json','Content-Type':'application/json'},body:JSON.stringify(foodItem)});case 7:this.props.history.push('/food');case 8:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}return handleSubmit;}()},{key:\"render\",value:function render(){var foodItem=this.state.foodItem;var title=/*#__PURE__*/_jsx(\"h2\",{children:foodItem.id?'Edit your meal':'Add your meal'});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(AppNavbar,{}),/*#__PURE__*/_jsxs(Container,{fluid:true,className:'set_background',children:[title,/*#__PURE__*/_jsxs(Form,{onSubmit:this.handleSubmit,className:\"form\",children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"description\",id:\"description\",value:foodItem.description||'',onChange:this.handleChange,autoComplete:\"description\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Label,{for:\"calories\",children:\"Calories\"}),/*#__PURE__*/_jsx(Input,{type:\"text\",name:\"calories\",id:\"calories\",value:foodItem.calories||'',onChange:this.handleChange,autoComplete:\"10\"})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Button,{outline:true,color:\"secondary\",style:{color:\"#00005c\",margin:\"1%\",boxShadow:\"5px 5px 3px rgba(46, 46, 46, 0.62)\"},type:\"submit\",children:\"Save\"}),' ',/*#__PURE__*/_jsx(Button,{color:\"secondary\",style:{color:\"#00005c\",margin:\"1%\",boxShadow:\"5px 5px 3px rgba(46, 46, 46, 0.62)\"},tag:Link,to:\"/food\",children:\"Cancel\"})]})]})]})]});}}]);return Edit;}(Component);export default withRouter(Edit);","map":{"version":3,"sources":["/home/oem/UniversityProjects/MIPT/FullStack/Project/demo/app/src/Edit.js"],"names":["React","Component","Link","withRouter","Button","Container","Form","FormGroup","Input","Label","AppNavbar","Edit","props","nullFoodItem","description","calories","state","foodItem","handleChange","bind","handleSubmit","match","params","id","fetch","json","newFoodItem","setState","event","target","value","name","console","log","preventDefault","item","method","headers","body","JSON","stringify","history","push","title","color","margin","boxShadow"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { Button, Container, Form, FormGroup, Input, Label } from 'reactstrap';\nimport AppNavbar from './AppNavbar';\n\nclass Edit extends Component {\n\n    nullFoodItem = {\n        description: '',\n        calories: ''\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            foodItem: this.nullFoodItem\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    async componentDidMount() {\n        if (this.props.match.params.id !== 'new') {\n            const newFoodItem = await (await fetch(`/food/${this.props.match.params.id}`)).json();\n            this.setState({ foodItem: newFoodItem });\n        }\n    }\n\n    handleChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n        let foodItem = { ...this.state.foodItem };\n        foodItem[name] = value;\n        console.log(\"save new \" + name);\n        console.log(foodItem);\n        this.setState({ foodItem });\n    }\n\n    async handleSubmit(event) {\n        event.preventDefault();\n        const { foodItem, item } = this.state;\n\n        console.log(this.state);\n        console.log(foodItem);\n        console.log(item);\n\n        await fetch('/food' + (foodItem.id ? '/' + foodItem.id : ''), {\n            method: (foodItem.id) ? 'PUT' : 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(foodItem),\n        });\n        this.props.history.push('/food');\n    }\n\n    render() {\n        const { foodItem } = this.state;\n        const title = <h2>{foodItem.id ? 'Edit your meal' : 'Add your meal'}</h2>;\n\n        return <div>\n            <AppNavbar />\n            <Container fluid className={'set_background'}>\n                {title}\n                <Form onSubmit={this.handleSubmit} className='form'>\n                    <FormGroup>\n                        <Label for=\"description\">Description</Label>\n                        <Input type=\"text\" name=\"description\" id=\"description\" value={foodItem.description || ''}\n                            onChange={this.handleChange} autoComplete=\"description\" />\n                    </FormGroup>\n                    <FormGroup>\n                        <Label for=\"calories\">Calories</Label>\n                        <Input type=\"text\" name=\"calories\" id=\"calories\" value={foodItem.calories || ''}\n                            onChange={this.handleChange} autoComplete=\"10\" />\n                    </FormGroup>\n                    <FormGroup>\n                        <Button\n                            outline color=\"secondary\"\n                            style={{ color: \"#00005c\", margin: \"1%\", boxShadow: \"5px 5px 3px rgba(46, 46, 46, 0.62)\" }}\n                            type=\"submit\">Save</Button>{' '}\n                        <Button\n                            color=\"secondary\"\n                            style={{ color: \"#00005c\", margin: \"1%\", boxShadow: \"5px 5px 3px rgba(46, 46, 46, 0.62)\" }}\n                            tag={Link} to=\"/food\">Cancel</Button>\n                    </FormGroup>\n                </Form>\n            </Container>\n        </div>\n    }\n}\n\nexport default withRouter(Edit);"]},"metadata":{},"sourceType":"module"}